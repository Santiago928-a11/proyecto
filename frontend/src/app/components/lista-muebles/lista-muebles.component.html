<div class="card muebles-list">
  <h1>Lista de Muebles</h1>
  <a routerLink="/crear" class="btn-agregar">Agregar Mueble</a>

  <table class="tabla-muebles">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Descripci√≥n</th>
        <th>Precio</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let m of muebles">
        <td>{{ m.id }}</td>
        <td>{{ m.nombre }}</td>
        <td>{{ m.descripcion }}</td>
        <td>${{ m.precio | number:'1.2-2' }}</td>
        <td class="acciones">
          <a [routerLink]="['/editar', m.id]" class="btn-editar">Editar</a>
          <button (click)="borrarMueble(m.id!)" class="btn-borrar">Borrar</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<div class="card">
  <h1>Cantidad de productos por rango de precios</h1>
  <canvas baseChart
    [data]="chartData"
    [options]="chartOptions"
    [type]="'doughnut'">
  </canvas>
</div>

<div class="card">
  <h1>Carga Excel</h1>
  <input type="file" (change)="onFileSelect($event)" class="file-input" />

  <div *ngIf="progreso > 0" class="progreso">Progreso: {{ progreso }}%</div>
  <p class="mensaje">{{ mensaje }}</p>
</div>

<div class="modal" *ngIf="mostrarModal">
  <div class="modal-contenido">
    <span class="cerrar" (click)="cerrarModal()">&times;</span>
    <h2>Vista previa de hojas</h2>

    <div *ngFor="let hoja of hojasValidasPreview" class="hoja-preview">
      <h3>
        <label>
          <input 
            type="checkbox" 
            [value]="hoja.nombre" 
            (change)="toggleHojaSeleccionada(hoja.nombre, $event)">
          {{ hoja.nombre }}
        </label>
      </h3>

      <table>
        <thead>
          <tr>
            <th *ngFor="let key of hoja.datos[0] | keyvalue">{{ key.key }}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let fila of hoja.datos">
            <td *ngFor="let valor of fila | keyvalue">{{ valor.value }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <button 
      (click)="subirHojasSeleccionadas()" 
      class="btn-agregar" 
      style="margin-top: 1rem;">
      Subir hojas seleccionadas
    </button>
  </div>
</div>

<div class="confirm-overlay" *ngIf="mostrarConfirmacion">
  <div class="confirm-modal">
    <p class="confirm-text">{{ mensajeConfirmacion }}</p>
    <div class="confirm-buttons">
      <button class="btn-aceptar" (click)="confirmarAccion()">Aceptar</button>
      <button class="btn-cancelar" (click)="cerrarConfirmacion()">Cancelar</button>
    </div>
  </div>
</div>




